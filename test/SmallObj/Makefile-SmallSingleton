

CPP = g++
CC = gcc
OBJ = SmallSingleton.o 
LINKOBJ = SmallSingleton.o 
LIBS = -L../../lib -lloki
CXXINCS = -I./../../include -I./../../include/loki 
CXXFLAGS = $(CXXINCS) -DNDEBUG -fexpensive-optimizations -O3 
BIN = SmallSingleton-gcc.exe
RM = rm -f
CHK_DIR_EXISTS= if not exist
MKDIR = mkdir

.PHONY: all all-before all-after clean clean-custom

all: clean all-before $(BIN) all-after


clean: clean-custom
	${RM} $(OBJ) $(BIN)

$(BIN): $(OBJ)
	$(CPP) $(LINKOBJ) -o SmallSingleton-gcc.exe $(LIBS) 
	
check_tmp: 
	@$(CHK_DIR_EXISTS) "" $(MKDIR) "tmp"

SmallSingleton.o: SmallSingleton.cpp
	$(CPP) -c SmallSingleton.cpp -o SmallSingleton.o $(CXXFLAGS)

